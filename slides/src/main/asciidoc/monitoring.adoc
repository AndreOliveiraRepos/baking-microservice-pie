ifndef::imagesdir[:imagesdir: images]

= Monitoring

[%step]
* We have several microservices
* Running on several Pis
* Scaling up and down
* How do we monitor them?

== Architecture

image::monitoring-architecture.png[]

== Tail-f on each PI

[source,shell]
----
$ tail -f myserver.log
----

== Central Monitoring

[%step]
* xxx
* xxx
* xxx

== Several to choose from

[%step]
* xx
* xx
* ELK

== Logstash


== Elastic Search


== Kibana


== Gelf

[%step]
* Graylog Extended Log Format
* Log format avoids classic plain syslog
* Docker log driver

== logstash.conf

[source]
----
include::{demo03dir}/infra/elk/logstash.conf[]
----

== Gelf on docker-compose

[source,yaml]
----
include::{demo03dir}/docker-compose.yml[]
----

== Demo

image::monitoring-architecture.png[]

== What's next ?

[%step]
* Fixing IP addresses
* Adding configuration
